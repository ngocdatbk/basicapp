<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/ef25ba5/css/bootstrap.css" rel="stylesheet">
<link href="./assets/d6a501f7/solarized_light.css" rel="stylesheet">
<link href="./assets/66a7d106/style.css" rel="stylesheet">
<script src="./assets/bc3f95e6/jquery.js"></script>
<script src="./assets/ef25ba5/js/bootstrap.js"></script>
<script src="./assets/e4cd224c/jssearch.js"></script>    <title>The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w2176" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w2176-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w2176-collapse" class="collapse navbar-collapse"><ul id="w2177" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-2160" data-toggle="collapse" data-parent="#navigation">REQUIREMENTS <b class="caret"></b></a><div id="navigation-2160" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2161" data-toggle="collapse" data-parent="#navigation">INSTALLATION <b class="caret"></b></a><div id="navigation-2161" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2162" data-toggle="collapse" data-parent="#navigation">Install via Composer <b class="caret"></b></a><div id="navigation-2162" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2163" data-toggle="collapse" data-parent="#navigation">Install from an Archive File <b class="caret"></b></a><div id="navigation-2163" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2164" data-toggle="collapse" data-parent="#navigation">Install with Docker <b class="caret"></b></a><div id="navigation-2164" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2165" data-toggle="collapse" data-parent="#navigation">CONFIGURATION <b class="caret"></b></a><div id="navigation-2165" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2166" data-toggle="collapse" data-parent="#navigation">Database <b class="caret"></b></a><div id="navigation-2166" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2167" data-toggle="collapse" data-parent="#navigation">TESTING <b class="caret"></b></a><div id="navigation-2167" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2168" data-toggle="collapse" data-parent="#navigation">Running  acceptance tests <b class="caret"></b></a><div id="navigation-2168" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2169" data-toggle="collapse" data-parent="#navigation">run all available tests <b class="caret"></b></a><div id="navigation-2169" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2170" data-toggle="collapse" data-parent="#navigation">run acceptance tests <b class="caret"></b></a><div id="navigation-2170" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2171" data-toggle="collapse" data-parent="#navigation">run only unit and functional tests <b class="caret"></b></a><div id="navigation-2171" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2172" data-toggle="collapse" data-parent="#navigation">Code coverage support <b class="caret"></b></a><div id="navigation-2172" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2173" data-toggle="collapse" data-parent="#navigation">collect coverage for all tests <b class="caret"></b></a><div id="navigation-2173" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2174" data-toggle="collapse" data-parent="#navigation">collect coverage only for unit tests <b class="caret"></b></a><div id="navigation-2174" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2175" data-toggle="collapse" data-parent="#navigation">collect coverage for unit and functional tests <b class="caret"></b></a><div id="navigation-2175" class="submenu panel-collapse collapse"></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Reusing Test Code <span id="reusing-test-code"></span><a href="#reusing-test-code" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#what-are-actors">What are Actors</a></li>
<li><a href="#stepobjects">StepObjects</a></li>
<li><a href="#pageobjects">PageObjects</a></li>
<li><a href="#conclusion">Conclusion</a></li></ol></div>
<p>Codeception uses modularity to create a comfortable testing environment for every test suite you write.
Modules allow you to choose the actions and assertions that can be performed in tests.</p>
<h2>What are Actors <span id="what-are-actors"></span><a href="#what-are-actors" class="hashlink">&para;</a></h2><p>All actions and assertions that can be performed by the Actor object in a class are defined in modules.
It might look like Codeception limits you in testing, but that's not true. You can extend the testing suite
with your own actions and assertions, by writing them into a custom module, called a Helper.
We will get back to this later in this chapter, but for now let's look at the following test:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-string">'/'</span>);
<span class="hljs-variable">$I</span>-&gt;see(<span class="hljs-string">'Hello'</span>);
<span class="hljs-variable">$I</span>-&gt;seeInDatabase(<span class="hljs-string">'users'</span>, [<span class="hljs-string">'id'</span> =&gt; <span class="hljs-number">1</span>]);
<span class="hljs-variable">$I</span>-&gt;seeFileFound(<span class="hljs-string">'running.lock'</span>);
</code></pre>
<p>It can operate with different entities: the web page can be loaded with the PhpBrowser module,
the database assertion uses the Db module, and the file state can be checked with the Filesystem module.</p>
<p>Modules are attached to Actor classes in the suite config.
For example, in <code>tests/acceptance.suite.yml</code> we should see:</p>
<pre><code class="language-yaml">actor: AcceptanceTester
modules:
    enabled:
        - PhpBrowser:
            url: http://localhost
        - Db
        - Filesystem
</code></pre>
<p>The AcceptanceTester class has its methods defined in modules.
Let's see what's inside the <code>AcceptanceTester</code> class, which is located inside the <code>tests/_support</code> directory:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-comment">/**
 * Inherited Methods
 * <span class="hljs-doctag">@method</span> void wantToTest($text)
 * <span class="hljs-doctag">@method</span> void wantTo($text)
 * <span class="hljs-doctag">@method</span> void execute($callable)
 * <span class="hljs-doctag">@method</span> void expectTo($prediction)
 * <span class="hljs-doctag">@method</span> void expect($prediction)
 * <span class="hljs-doctag">@method</span> void amGoingTo($argumentation)
 * <span class="hljs-doctag">@method</span> void am($role)
 * <span class="hljs-doctag">@method</span> void lookForwardTo($achieveValue)
 * <span class="hljs-doctag">@method</span> void comment($description)
 * <span class="hljs-doctag">@method</span> void haveFriend($name, $actorClass = null)
 *
 * <span class="hljs-doctag">@SuppressWarnings</span>(PHPMD)
*/</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AcceptanceTester</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">Codeception</span>\<span class="hljs-title">Actor</span>
</span>{
    <span class="hljs-keyword">use</span> <span class="hljs-title">_generated</span>\<span class="hljs-title">AcceptanceTesterActions</span>;

   <span class="hljs-comment">/**
    * Define custom actions here
    */</span>
}
</code></pre>
<p>The most important part is the <code>_generated\AcceptanceTesterActions</code> trait, which is used as a proxy for enabled modules.
It knows which module executes which action and passes parameters into it.
This trait was created by running <code>codecept build</code> and is regenerated each time module or configuration changes.</p>
<h3>Authorization <span id="authorization"></span><a href="#authorization" class="hashlink">&para;</a></h3><p>It is recommended to put widely used actions inside an Actor class. A good example is the <code>login</code> action
which would probably be actively involved in acceptance or functional testing:</p>
<pre><code class="language- php">&lt;?php
class AcceptanceTester extends \Codeception\Actor
{
    // do not ever remove this line!
    use _generated\AcceptanceTesterActions;

    public function login($name, $password)
    {
        $I = $this;
        $I-&gt;amOnPage('/login');
        $I-&gt;submitForm('#loginForm', [
            'login' =&gt; $name,
            'password' =&gt; $password
        ]);
        $I-&gt;see($name, '.navbar');
    }
}
</code></pre>
<p>Now you can use the <code>login</code> method inside your tests:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span> = <span class="hljs-keyword">new</span> AcceptanceTester(<span class="hljs-variable">$scenario</span>);
<span class="hljs-variable">$I</span>-&gt;login(<span class="hljs-string">'miles'</span>, <span class="hljs-string">'123456'</span>);
</code></pre>
<p>However, implementing all actions for reuse in a single actor class may lead to
breaking the <a href="http://en.wikipedia.org/wiki/Single_responsibility_principle">Single Responsibility Principle</a>.</p>
<h3>Session Snapshot <span id="session-snapshot"></span><a href="#session-snapshot" class="hashlink">&para;</a></h3><p>If you need to authorize a user for each test, you can do so by submitting the login form at the beginning of every test.
Running those steps takes time, and in the case of Selenium tests (which are slow by themselves)
that time loss can become significant.</p>
<p>Codeception allows you to share cookies between tests, so a test user can stay logged in for other tests.</p>
<p>Let's improve the code of our <code>login</code> method, executing the form submission only once
and restoring the session from cookies for each subsequent login function call:</p>
<pre><code class="language- php">&lt;?php
    public function login($name, $password)
    {
        $I = $this;
        // if snapshot exists - skipping login
        if ($I-&gt;loadSessionSnapshot('login')) {
            return;
        }
        // logging in
        $I-&gt;amOnPage('/login');
        $I-&gt;submitForm('#loginForm', [
            'login' =&gt; $name,
            'password' =&gt; $password
        ]);
        $I-&gt;see($name, '.navbar');
         // saving snapshot
        $I-&gt;saveSessionSnapshot('login');
    }
</code></pre>
<p>Note that session restoration only works for <code>WebDriver</code> modules
(modules implementing <code>Codeception\Lib\Interfaces\SessionSnapshot</code>).</p>
<h2>StepObjects <span id="stepobjects"></span><a href="#stepobjects" class="hashlink">&para;</a></h2><p>StepObjects are great if you need some common functionality for a group of tests.
Let's say you are going to test an admin area of a site. You probably won't need the same actions from the admin area
while testing the front end, so it's a good idea to move these admin-specific tests into their own class.
We call such a classes StepObjects.</p>
<p>Lets create an Admin StepObject with the generator:</p>
<pre><code class="hljs bash language-bash">php vendor/bin/codecept generate:stepobject acceptance Admin
</code></pre>
<p>You can supply optional action names. Enter one at a time, followed by a newline.
End with an empty line to continue to StepObject creation.</p>
<pre><code class="hljs bash language-bash">php vendor/bin/codecept generate:stepobject acceptance Admin
Add action to StepObject class (ENTER to <span class="hljs-built_in">exit</span>): loginAsAdmin
Add action to StepObject class (ENTER to <span class="hljs-built_in">exit</span>):
StepObject was created <span class="hljs-keyword">in</span> /tests/acceptance/_support/Step/Acceptance/Admin.php
</code></pre>
<p>This will generate a class in <code>/tests/_support/Step/Acceptance/Admin.php</code> similar to this:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Step</span>\<span class="hljs-title">Acceptance</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Admin</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">AcceptanceTester</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginAsAdmin</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-variable">$I</span> = <span class="hljs-variable">$this</span>;
    }
}
</code></pre>
<p>As you see, this class is very simple. It extends the <code>AcceptanceTester</code> class,
meaning it can access all the methods and properties of <code>AcceptanceTester</code>.</p>
<p>The <code>loginAsAdmin</code> method may be implemented like this:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Step</span>\<span class="hljs-title">Acceptance</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Admin</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">AcceptanceTester</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loginAsAdmin</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-variable">$I</span> = <span class="hljs-variable">$this</span>;
        <span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-string">'/admin'</span>);
        <span class="hljs-variable">$I</span>-&gt;fillField(<span class="hljs-string">'username'</span>, <span class="hljs-string">'admin'</span>);
        <span class="hljs-variable">$I</span>-&gt;fillField(<span class="hljs-string">'password'</span>, <span class="hljs-string">'123456'</span>);
        <span class="hljs-variable">$I</span>-&gt;click(<span class="hljs-string">'Login'</span>);
    }
}
</code></pre>
<p>In tests, you can use a StepObject by instantiating <code>Step\Acceptance\Admin</code> instead of <code>AcceptanceTester</code>:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Step</span>\<span class="hljs-title">Acceptance</span>\<span class="hljs-title">Admin</span> <span class="hljs-title">as</span> <span class="hljs-title">AdminTester</span>;

<span class="hljs-variable">$I</span> = <span class="hljs-keyword">new</span> AdminTester(<span class="hljs-variable">$scenario</span>);
<span class="hljs-variable">$I</span>-&gt;loginAsAdmin();
</code></pre>
<p>The same way as above, a StepObject can be instantiated automatically by the Dependency Injection Container
when used inside the Cest format:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCest</span>
</span>{
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showUserProfile</span><span class="hljs-params">(\Step\Acceptance\Admin <span class="hljs-variable">$I</span>)</span>
    </span>{
        <span class="hljs-variable">$I</span>-&gt;loginAsAdmin();
        <span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-string">'/admin/profile'</span>);
        <span class="hljs-variable">$I</span>-&gt;see(<span class="hljs-string">'Admin Profile'</span>, <span class="hljs-string">'h1'</span>);
    }
}
</code></pre>
<p>If you have a complex interaction scenario, you may use several step objects in one test.
If you feel like adding too many actions into your Actor class
(which is AcceptanceTester in this case) consider moving some of them into separate StepObjects.</p>
<h2>PageObjects <span id="pageobjects"></span><a href="#pageobjects" class="hashlink">&para;</a></h2><p>For acceptance and functional testing, we will not only need to have common actions being reused across different tests,
we should have buttons, links and form fields being reused as well. For those cases we need to implement
the <a href="http://docs.seleniumhq.org/docs/06_test_design_considerations.jsp#page-object-design-pattern">PageObject pattern</a>,
which is widely used by test automation engineers. The PageObject pattern represents a web page as a class
and the DOM elements on that page as its properties, and some basic interactions as its methods.
PageObjects are very important when you are developing a flexible architecture of your tests.
Do not hard-code complex CSS or XPath locators in your tests but rather move them into PageObject classes.</p>
<p>Codeception can generate a PageObject class for you with command:</p>
<pre><code class="hljs bash language-bash">php vendor/bin/codecept generate:pageobject Login
</code></pre>
<p>This will create a <code>Login</code> class in <code>tests/_support/Page</code>.
The basic PageObject is nothing more than an empty class with a few stubs.
It is expected that you will populate it with the UI locators of a page it represents
and then those locators will be used on a page.
Locators are represented with public static properties:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Page</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Login</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$URL</span> = <span class="hljs-string">'/login'</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$usernameField</span> = <span class="hljs-string">'#mainForm #username'</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$passwordField</span> = <span class="hljs-string">'#mainForm input[name=password]'</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$loginButton</span> = <span class="hljs-string">'#mainForm input[type=submit]'</span>;
}
</code></pre>
<p>And this is how this page object can be used in a test:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Page</span>\<span class="hljs-title">Login</span> <span class="hljs-title">as</span> <span class="hljs-title">LoginPage</span>;

<span class="hljs-variable">$I</span> = <span class="hljs-keyword">new</span> AcceptanceTester(<span class="hljs-variable">$scenario</span>);
<span class="hljs-variable">$I</span>-&gt;wantTo(<span class="hljs-string">'login to site'</span>);
<span class="hljs-variable">$I</span>-&gt;amOnPage(LoginPage::<span class="hljs-variable">$URL</span>);
<span class="hljs-variable">$I</span>-&gt;fillField(LoginPage::<span class="hljs-variable">$usernameField</span>, <span class="hljs-string">'bill evans'</span>);
<span class="hljs-variable">$I</span>-&gt;fillField(LoginPage::<span class="hljs-variable">$passwordField</span>, <span class="hljs-string">'debby'</span>);
<span class="hljs-variable">$I</span>-&gt;click(LoginPage::<span class="hljs-variable">$loginButton</span>);
<span class="hljs-variable">$I</span>-&gt;see(<span class="hljs-string">'Welcome, bill'</span>);
</code></pre>
<p>As you see, you can freely change markup of your login page, and all the tests interacting with this page
will have their locators updated according to properties of LoginPage class.</p>
<p>But let's move further. The PageObject concept specifies that the methods for the page interaction
should also be stored in a PageObject class. It now stores a passed instance of an Actor class.
An AcceptanceTester can be accessed via the <code>AcceptanceTester</code> property of that class.
Let's define a <code>login</code> method in this class:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Page</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Login</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$URL</span> = <span class="hljs-string">'/login'</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$usernameField</span> = <span class="hljs-string">'#mainForm #username'</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$passwordField</span> = <span class="hljs-string">'#mainForm input[name=password]'</span>;
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-variable">$loginButton</span> = <span class="hljs-string">'#mainForm input[type=submit]'</span>;

    <span class="hljs-comment">/**
     * <span class="hljs-doctag">@var</span> AcceptanceTester
     */</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-variable">$tester</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">(\AcceptanceTester <span class="hljs-variable">$I</span>)</span>
    </span>{
        <span class="hljs-variable">$this</span>-&gt;tester = <span class="hljs-variable">$I</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">login</span><span class="hljs-params">(<span class="hljs-variable">$name</span>, <span class="hljs-variable">$password</span>)</span>
    </span>{
        <span class="hljs-variable">$I</span> = <span class="hljs-variable">$this</span>-&gt;tester;

        <span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-keyword">self</span>::<span class="hljs-variable">$URL</span>);
        <span class="hljs-variable">$I</span>-&gt;fillField(<span class="hljs-keyword">self</span>::<span class="hljs-variable">$usernameField</span>, <span class="hljs-variable">$name</span>);
        <span class="hljs-variable">$I</span>-&gt;fillField(<span class="hljs-keyword">self</span>::<span class="hljs-variable">$passwordField</span>, <span class="hljs-variable">$password</span>);
        <span class="hljs-variable">$I</span>-&gt;click(<span class="hljs-keyword">self</span>::<span class="hljs-variable">$loginButton</span>);

        <span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>;
    }
}
</code></pre>
<p>And here is an example of how this PageObject can be used in a test:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">use</span> <span class="hljs-title">Page</span>\<span class="hljs-title">Login</span> <span class="hljs-title">as</span> <span class="hljs-title">LoginPage</span>;

<span class="hljs-variable">$I</span> = <span class="hljs-keyword">new</span> AcceptanceTester(<span class="hljs-variable">$scenario</span>);
<span class="hljs-variable">$loginPage</span> = <span class="hljs-keyword">new</span> LoginPage(<span class="hljs-variable">$I</span>);
<span class="hljs-variable">$loginPage</span>-&gt;login(<span class="hljs-string">'bill evans'</span>, <span class="hljs-string">'debby'</span>);
<span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-string">'/profile'</span>);
<span class="hljs-variable">$I</span>-&gt;see(<span class="hljs-string">'Bill Evans Profile'</span>, <span class="hljs-string">'h1'</span>);
</code></pre>
<p>If you write your scenario-driven tests in the Cest format (which is the recommended approach),
you can bypass the manual creation of a PageObject and delegate this task to Codeception.
If you specify which object you need for a test, Codeception will try to create it using the dependency injection container.
In the case of a PageObject you should declare a class as a parameter for a test method:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">UserCest</span>
</span>{
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">showUserProfile</span><span class="hljs-params">(AcceptanceTester <span class="hljs-variable">$I</span>, \Page\Login <span class="hljs-variable">$loginPage</span>)</span>
    </span>{
        <span class="hljs-variable">$loginPage</span>-&gt;login(<span class="hljs-string">'bill evans'</span>, <span class="hljs-string">'debby'</span>);
        <span class="hljs-variable">$I</span>-&gt;amOnPage(<span class="hljs-string">'/profile'</span>);
        <span class="hljs-variable">$I</span>-&gt;see(<span class="hljs-string">'Bill Evans Profile'</span>, <span class="hljs-string">'h1'</span>);
    }
}
</code></pre>
<p>The dependency injection container can construct any object that requires any known class type.
For instance, <code>Page\Login</code> required <code>AcceptanceTester</code>, and so it was injected into <code>Page\Login</code> constructor,
and PageObject was created and passed into method arguments. You should explicitly specify
the types of required objects for Codeception to know what objects should be created for a test.
Dependency Injection will be described in the next chapter.</p>
<h2>Conclusion <span id="conclusion"></span><a href="#conclusion" class="hashlink">&para;</a></h2><p>There are lots of ways to create reusable and readable tests. Group common actions together
and move them to an Actor class or StepObjects. Move CSS and XPath locators into PageObjects.
Write your custom actions and assertions in Helpers.
Scenario-driven tests should not contain anything more complex than <code>$I-&gt;doSomething</code> commands.
Following this approach will allow you to keep your tests clean, readable, stable and make them easy to maintain.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 28 Dec 2018 10:27:57 +0100</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
