<!DOCTYPE html>
<html lang="en-US">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="language" content="en" />
        <link href="./assets/ef25ba5/css/bootstrap.css" rel="stylesheet">
<link href="./assets/d6a501f7/solarized_light.css" rel="stylesheet">
<link href="./assets/66a7d106/style.css" rel="stylesheet">
<script src="./assets/bc3f95e6/jquery.js"></script>
<script src="./assets/ef25ba5/js/bootstrap.js"></script>
<script src="./assets/e4cd224c/jssearch.js"></script>    <title>The Definitive Guide to Yii 2.0</title>
</head>
<body>

<div class="wrap">
    <nav id="w2266" class="navbar-inverse navbar-fixed-top navbar"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#w2266-collapse"><span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span></button><a class="navbar-brand" href="./guide-index.html">The Definitive Guide to Yii 2.0</a></div><div id="w2266-collapse" class="collapse navbar-collapse"><ul id="w2267" class="navbar-nav nav"><li><a href="./guide-README.html">Guide</a></li></ul><div class="navbar-form navbar-left" role="search">
  <div class="form-group">
    <input id="searchbox" type="text" class="form-control" placeholder="Search">
  </div>
</div>
</div></nav>
    <div id="search-resultbox" style="display: none;" class="modal-content">
        <ul id="search-results">
        </ul>
    </div>

    
<div class="row">
    <div class="col-md-2">
                <div id="navigation" class="list-group"><a class="list-group-item" href="#navigation-2250" data-toggle="collapse" data-parent="#navigation">REQUIREMENTS <b class="caret"></b></a><div id="navigation-2250" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2251" data-toggle="collapse" data-parent="#navigation">INSTALLATION <b class="caret"></b></a><div id="navigation-2251" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2252" data-toggle="collapse" data-parent="#navigation">Install via Composer <b class="caret"></b></a><div id="navigation-2252" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2253" data-toggle="collapse" data-parent="#navigation">Install from an Archive File <b class="caret"></b></a><div id="navigation-2253" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2254" data-toggle="collapse" data-parent="#navigation">Install with Docker <b class="caret"></b></a><div id="navigation-2254" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2255" data-toggle="collapse" data-parent="#navigation">CONFIGURATION <b class="caret"></b></a><div id="navigation-2255" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2256" data-toggle="collapse" data-parent="#navigation">Database <b class="caret"></b></a><div id="navigation-2256" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2257" data-toggle="collapse" data-parent="#navigation">TESTING <b class="caret"></b></a><div id="navigation-2257" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2258" data-toggle="collapse" data-parent="#navigation">Running  acceptance tests <b class="caret"></b></a><div id="navigation-2258" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2259" data-toggle="collapse" data-parent="#navigation">run all available tests <b class="caret"></b></a><div id="navigation-2259" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2260" data-toggle="collapse" data-parent="#navigation">run acceptance tests <b class="caret"></b></a><div id="navigation-2260" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2261" data-toggle="collapse" data-parent="#navigation">run only unit and functional tests <b class="caret"></b></a><div id="navigation-2261" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2262" data-toggle="collapse" data-parent="#navigation">Code coverage support <b class="caret"></b></a><div id="navigation-2262" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2263" data-toggle="collapse" data-parent="#navigation">collect coverage for all tests <b class="caret"></b></a><div id="navigation-2263" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2264" data-toggle="collapse" data-parent="#navigation">collect coverage only for unit tests <b class="caret"></b></a><div id="navigation-2264" class="submenu panel-collapse collapse"></div>
<a class="list-group-item" href="#navigation-2265" data-toggle="collapse" data-parent="#navigation">collect coverage for unit and functional tests <b class="caret"></b></a><div id="navigation-2265" class="submenu panel-collapse collapse"></div></div>    </div>
    <div class="col-md-9 guide-content" role="main">
        <h1>Testing WebServices <span id="testing-webservices"></span><a href="#testing-webservices" class="hashlink">&para;</a></h1>
<div class="toc"><ol><li><a href="#rest">REST</a></li>
<li><a href="#soap">SOAP</a></li>
<li><a href="#conclusion">Conclusion</a></li></ol></div>
<p>The same way we tested a web site, Codeception allows you to test web services. They are very hard to test manually, so it's a really good idea to automate web service testing. We have SOAP and REST as standards, which are represented in corresponding modules, which we will cover in this chapter.</p>
<p>You should start by creating a new test suite, (which was not provided by the <code>bootstrap</code> command). We recommend calling it <strong>api</strong> and using the <code>ApiTester</code> class for it.</p>
<pre><code class="hljs bash language-bash">$ php vendor/bin/codecept generate:suite api
</code></pre>
<p>We will put all the api tests there.</p>
<h2>REST <span id="rest"></span><a href="#rest" class="hashlink">&para;</a></h2><p>The REST web service is accessed via HTTP with standard methods: <code>GET</code>, <code>POST</code>, <code>PUT</code>, <code>DELETE</code>. They allow users to receive and manipulate entities from the service. Accessing a WebService requires an HTTP client, so for using it you need the module <code>PhpBrowser</code> or one of framework modules set up. For example, we can use the <code>Symfony</code> module for Symfony2 applications in order to ignore web server and test web service internally.</p>
<p>Configure modules in <code>api.suite.yml</code>:</p>
<pre><code class="language- yaml">actor: ApiTester
modules:
    enabled:
        - REST:
            url: http://serviceapp/api/v1/
            depends: PhpBrowser
</code></pre>
<p>The REST module will connect to <code>PhpBrowser</code> according to this configuration. Depending on the web service we may deal with XML or JSON responses. Codeception handles both data formats well, however If you don't need one of them, you can explicitly specify that the JSON or XML parts of the module will be used:</p>
<pre><code class="language- yaml">actor: ApiTester
modules:
    enabled:
        - REST:
            url: http://serviceapp/api/v1/
            depends: PhpBrowser
            part: Json
</code></pre>
<p>API tests can be functional and be executed using Symfony, Laravel5, Zend, or any other framework module. You will need slightly update configuration for it:</p>
<pre><code class="language- yaml">actor: ApiTester
modules:
    enabled:
        - REST:
            url: /api/v1/
            depends: Laravel5
</code></pre>
<p>Once we have configured our new testing suite, we can create the first sample test:</p>
<pre><code class="hljs bash language-bash">$ codecept generate:cest api CreateUser
</code></pre>
<p>It will be called <code>CreateUserCest.php</code>. 
We need to implement a public method for each test. Let's make <code>createUserViaAPI</code> to test creation of a user via the REST API.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CreateUserCest</span>
</span>{
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_before</span><span class="hljs-params">(\ApiTester <span class="hljs-variable">$I</span>)</span>
    </span>{
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_after</span><span class="hljs-params">(\ApiTester <span class="hljs-variable">$I</span>)</span>
    </span>{
    }

    <span class="hljs-comment">// tests</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createUserViaAPI</span><span class="hljs-params">(\ApiTester <span class="hljs-variable">$I</span>)</span>
    </span>{
        <span class="hljs-variable">$I</span>-&gt;amHttpAuthenticated(<span class="hljs-string">'service_user'</span>, <span class="hljs-string">'123456'</span>);
        <span class="hljs-variable">$I</span>-&gt;haveHttpHeader(<span class="hljs-string">'Content-Type'</span>, <span class="hljs-string">'application/x-www-form-urlencoded'</span>);
        <span class="hljs-variable">$I</span>-&gt;sendPOST(<span class="hljs-string">'/users'</span>, [<span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'davert'</span>, <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'davert@codeception.com'</span>]);
        <span class="hljs-variable">$I</span>-&gt;seeResponseCodeIs(\Codeception\Util\HttpCode::OK); <span class="hljs-comment">// 200</span>
        <span class="hljs-variable">$I</span>-&gt;seeResponseIsJson();
        <span class="hljs-variable">$I</span>-&gt;seeResponseContains(<span class="hljs-string">'{"result":"ok"}'</span>);
        
    }
}
</code></pre>
<p>We can use HTTP code constants from <code>Codeception\Util\HttpCode</code> instead of numeric values to check response code in <code>seeResponseCodeIs</code> and <code>dontSeeResponseCodeIs</code> methods.</p>
<h3>Testing JSON Responses <span id="testing-json-responses"></span><a href="#testing-json-responses" class="hashlink">&para;</a></h3><p>The last line of the previous example verified that the response contained the provided string. However we shouldn't rely on it, as depending on content formatting we can receive different results with the same data. What we actually need is to check that the response can be parsed and it contains some of the values we expect. In the case of JSON we can use the <code>seeResponseContainsJson</code> method</p>
<pre><code class="language- php">&lt;?php
// matches {"result":"ok"}'
$I-&gt;seeResponseContainsJson(['result' =&gt; 'ok']);
// it can match tree-like structures as well
$I-&gt;seeResponseContainsJson([
  'user' =&gt; [
      'name' =&gt; 'davert',
      'email' =&gt; 'davert@codeception.com',
      'status' =&gt; 'inactive'
  ]
]);

</code></pre>
<p>You may want to perform even more complex assertions on a response. This can be done by writing your own methods in the <a href="http://codeception.com/docs/06-ReusingTestCode#Modules-and-Helpers">Helper</a> classes. To access the latest JSON response you will need to get the <code>response</code> property of the <code>REST</code> module. Let's demonstrate it with the <code>seeResponseIsHtml</code> method:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Helper</span>;

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Api</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">Codeception</span>\<span class="hljs-title">Module</span>
</span>{
  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">seeResponseIsHtml</span><span class="hljs-params">()</span>
  </span>{
    <span class="hljs-variable">$response</span> = <span class="hljs-variable">$this</span>-&gt;getModule(<span class="hljs-string">'REST'</span>)-&gt;response;
    <span class="hljs-variable">$this</span>-&gt;assertRegExp(<span class="hljs-string">'~^&lt;!DOCTYPE HTML(.*?)&lt;html&gt;.*?&lt;\/html&gt;~m'</span>, <span class="hljs-variable">$response</span>);
  }
}

</code></pre>
<p>The same way you can receive request parameters and headers.</p>
<h3>Validate JSON structures <span id="validate-json-structures"></span><a href="#validate-json-structures" class="hashlink">&para;</a></h3><p>It is pretty common for API tests to not only validate the received data but to check the structure of the response. Response data is not usually considered to be consistent, and may change on each request, however the JSON/XML structure should be kept the same for an API version. In order to check response structure the REST module has some useful methods.</p>
<p>If we expect a JSON response to be received we can check its structure with <a href="http://goessner.net/articles/JsonPath/">JSONPath</a>. It looks and sounds like XPath but is designed to work with JSON data, however we can convert JSON into XML and use XPath to validate the structure. Both approaches are valid and can be used in the REST module:</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;sendGET(<span class="hljs-string">'/users'</span>);
<span class="hljs-variable">$I</span>-&gt;seeResponseCodeIs(HttpCode::OK); <span class="hljs-comment">// 200</span>
<span class="hljs-variable">$I</span>-&gt;seeResponseIsJson();
<span class="hljs-variable">$I</span>-&gt;seeResponseJsonMatchesJsonPath(<span class="hljs-string">'$[0].user.login'</span>);
<span class="hljs-variable">$I</span>-&gt;seeResponseJsonMatchesXpath(<span class="hljs-string">'//user/login'</span>);
</code></pre>
<p>More detailed check can be applied if you need to validate the type of fields in a response.
You can do that by using with a <a href="http://codeception.com/docs/modules/REST#seeResponseMatchesJsonType">seeResponseMatchesJsonType</a> action in which you define the structure of JSON response.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;sendGET(<span class="hljs-string">'/users/1'</span>);
<span class="hljs-variable">$I</span>-&gt;seeResponseCodeIs(HttpCode::OK); <span class="hljs-comment">// 200</span>
<span class="hljs-variable">$I</span>-&gt;seeResponseIsJson();
<span class="hljs-variable">$I</span>-&gt;seeResponseMatchesJsonType([
    <span class="hljs-string">'id'</span> =&gt; <span class="hljs-string">'integer'</span>,
    <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'string'</span>,
    <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'string:email'</span>,
    <span class="hljs-string">'homepage'</span> =&gt; <span class="hljs-string">'string:url|null'</span>,
    <span class="hljs-string">'created_at'</span> =&gt; <span class="hljs-string">'string:date'</span>,
    <span class="hljs-string">'is_active'</span> =&gt; <span class="hljs-string">'boolean'</span>
]);

</code></pre>
<p>Codeception uses this simple and lightweight definitions format which can be <a href="http://codeception.com/docs/modules/REST#seeResponseMatchesJsonType">easily learned and extended</a>.</p>
<h3>Testing XML Responses <span id="testing-xml-responses"></span><a href="#testing-xml-responses" class="hashlink">&para;</a></h3><p>In case your REST API works with XML format you can use similar methods to test its data and structure.
There is <code>seeXmlResponseIncludes</code> method to match inclusion of XML parts in response, and <code>seeXmlResponseMatchesXpath</code> to validate its structure.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;sendGET(<span class="hljs-string">'/users.xml'</span>);
<span class="hljs-variable">$I</span>-&gt;seeResponseCodeIs(\Codeception\Util\HttpCode::OK); <span class="hljs-comment">// 200</span>
<span class="hljs-variable">$I</span>-&gt;seeResponseIsXml();
<span class="hljs-variable">$I</span>-&gt;seeXmlResponseMatchesXpath(<span class="hljs-string">'//user/login'</span>);
<span class="hljs-variable">$I</span>-&gt;seeXmlResponseIncludes(\Codeception\Util\Xml::toXml([
    <span class="hljs-string">'user'</span> =&gt; [
      <span class="hljs-string">'name'</span> =&gt; <span class="hljs-string">'davert'</span>,
      <span class="hljs-string">'email'</span> =&gt; <span class="hljs-string">'davert@codeception.com'</span>,
      <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'inactive'</span>
  ]
]));

</code></pre>
<p>We are using <code>Codeception\Util\Xml</code> class which allows us to build XML structures in a clean manner. The <code>toXml</code> method may accept a string or array and returns \DOMDocument instance. If your XML contains attributes and so can't be represented as a PHP array you can create XML using the <a href="http://codeception.com/docs/reference/XmlBuilder">XmlBuilder</a> class. We will take a look at it a bit more in next section.</p>
<div class="alert alert-info">
Use `\Codeception\Util\Xml::build()` to create XmlBuilder instance.
</div>
<h2>SOAP <span id="soap"></span><a href="#soap" class="hashlink">&para;</a></h2><p>SOAP web services are usually more complex. You will need PHP <a href="http://php.net/manual/en/soap.installation.php">configured with SOAP support</a>. Good knowledge of XML is required too. <code>SOAP</code> module uses specially formatted POST request to connect to WSDL web services. Codeception uses <code>PhpBrowser</code> or one of framework modules to perform interactions. If you choose using a framework module, SOAP will automatically connect to the underlying framework. That may improve the speed of a test execution and will provide you with more detailed stack traces.</p>
<p>Let's configure <code>SOAP</code> module to be used with <code>PhpBrowser</code>:</p>
<pre><code class="language- yaml">actor: ApiTester
modules:
    enabled:
    - SOAP:
      depends: PhpBrowser
      endpoint: http://serviceapp/api/v1/
</code></pre>
<p>SOAP request may contain application specific information, like authentication or payment. This information is provided with SOAP header inside the <code>&lt;soap:Header&gt;</code> element of XML request. In case you need to submit such header, you can use <code>haveSoapHeader</code> action. For example, next line of code</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;haveSoapHeader(<span class="hljs-string">'Auth'</span>, <span class="hljs-keyword">array</span>(<span class="hljs-string">'username'</span> =&gt; <span class="hljs-string">'Miles'</span>, <span class="hljs-string">'password'</span> =&gt; <span class="hljs-string">'123456'</span>));

</code></pre>
<p>will produce this XML header</p>
<pre><code class="hljs xml language-xml"><span class="hljs-tag">&lt;<span class="hljs-title">soap:Header</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">Auth</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">username</span>&gt;</span>Miles<span class="hljs-tag">&lt;/<span class="hljs-title">username</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">password</span>&gt;</span>123456<span class="hljs-tag">&lt;/<span class="hljs-title">password</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">Auth</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">soap:Header</span>&gt;</span>
</code></pre>
<p>Use <code>sendSoapRequest</code> method to define the body of your request.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;sendSoapRequest(<span class="hljs-string">'CreateUser'</span>, <span class="hljs-string">'&lt;name&gt;Miles Davis&lt;/name&gt;&lt;email&gt;miles@davis.com&lt;/email&gt;'</span>);

</code></pre>
<p>This call will be translated to XML:</p>
<pre><code class="hljs xml language-xml"><span class="hljs-tag">&lt;<span class="hljs-title">soap:Body</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">ns:CreateUser</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">name</span>&gt;</span>Miles Davis<span class="hljs-tag">&lt;/<span class="hljs-title">name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">email</span>&gt;</span>miles@davis.com<span class="hljs-tag">&lt;/<span class="hljs-title">email</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">ns:CreateUser</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">soap:Body</span>&gt;</span>
</code></pre>
<p>And here is the list of sample assertions that can be used with SOAP.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;seeSoapResponseEquals(<span class="hljs-string">'&lt;?xml version="1.0"&lt;error&gt;500&lt;/error&gt;'</span>);
<span class="hljs-variable">$I</span>-&gt;seeSoapResponseIncludes(<span class="hljs-string">'&lt;result&gt;1&lt;/result&gt;'</span>);
<span class="hljs-variable">$I</span>-&gt;seeSoapResponseContainsStructure(<span class="hljs-string">'&lt;user&gt;&lt;name&gt;&lt;/name&gt;&lt;email&gt;&lt;/email&gt;'</span>);
<span class="hljs-variable">$I</span>-&gt;seeSoapResponseContainsXPath(<span class="hljs-string">'//result/user/name[@id=1]'</span>);

</code></pre>
<p>In case you don't want to write long XML strings, consider using <a href="http://codeception.com/docs/reference/XmlBuilder">XmlBuilder</a> class. It will help you to build complex XMLs in jQuery-like style.
In the next example we will use <code>XmlBuilder</code> instead of regular XML.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-variable">$I</span>-&gt;haveSoapHeader(<span class="hljs-string">'Session'</span>, <span class="hljs-keyword">array</span>(<span class="hljs-string">'token'</span> =&gt; <span class="hljs-string">'123456'</span>));
<span class="hljs-variable">$I</span>-&gt;sendSoapRequest(<span class="hljs-string">'CreateUser'</span>, Xml::build()
  -&gt;user-&gt;email-&gt;val(<span class="hljs-string">'miles@davis.com'</span>));
<span class="hljs-variable">$I</span>-&gt;seeSoapResponseIncludes(\Codeception\Util\Xml::build()
  -&gt;result-&gt;val(<span class="hljs-string">'Ok'</span>)
    -&gt;user-&gt;attr(<span class="hljs-string">'id'</span>, <span class="hljs-number">1</span>)
);

</code></pre>
<p>It's up to you to decide whether to use <code>XmlBuilder</code> or plain XML. <code>XmlBuilder</code> will return XML string as well.</p>
<p>You may extend current functionality by using <code>SOAP</code> module in your helper class. To access the SOAP response as <code>\DOMDocument</code> you can use <code>response</code> property of <code>SOAP</code> module.</p>
<pre><code class="hljs php language-php"><span class="hljs-preprocessor">&lt;?php</span>
<span class="hljs-keyword">namespace</span> <span class="hljs-title">Helper</span>;
<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Api</span> <span class="hljs-keyword">extends</span> \<span class="hljs-title">Codeception</span>\<span class="hljs-title">Module</span> </span>{

  <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">seeResponseIsValidOnSchema</span><span class="hljs-params">(<span class="hljs-variable">$schema</span>)</span>
  </span>{
    <span class="hljs-variable">$response</span> = <span class="hljs-variable">$this</span>-&gt;getModule(<span class="hljs-string">'SOAP'</span>)-&gt;response;
    <span class="hljs-variable">$this</span>-&gt;assertTrue(<span class="hljs-variable">$response</span>-&gt;schemaValidate(<span class="hljs-variable">$schema</span>));
  }
}

</code></pre>
<h2>Conclusion <span id="conclusion"></span><a href="#conclusion" class="hashlink">&para;</a></h2><p>Codeception has two modules that will help you to test various web services. They need a new <code>api</code> suite to be created. Remember, you are not limited to test only response body. By including <code>Db</code> module you may check if a user has been created after the <code>CreateUser</code> call. You can improve testing scenarios by using REST or SOAP responses in your helper methods.</p>
        <div class="toplink"><a href="#" class="h1" title="go to top"><span class="glyphicon glyphicon-arrow-up"></a></div>
    </div>
</div>


</div>

<footer class="footer">
        <p class="pull-right"><small>Page generated on Fri, 28 Dec 2018 10:27:57 +0100</small></p>
    Powered by <a href="http://www.yiiframework.com/" rel="external">Yii Framework</a></footer>

<script>jQuery(function ($) {
    var shiftWindow = function () { scrollBy(0, -50) };
    if (location.hash) setTimeout(shiftWindow, 1);
    window.addEventListener("hashchange", shiftWindow);
var element = document.createElement("script");
element.src = "./jssearch.index.js";
document.body.appendChild(element);

var searchBox = $('#searchbox');

// search when typing in search field
searchBox.on("keyup", function(event) {
    var query = $(this).val();

    if (query == '' || event.which == 27) {
        $('#search-resultbox').hide();
        return;
    } else if (event.which == 13) {
        var selectedLink = $('#search-resultbox a.selected');
        if (selectedLink.length != 0) {
            document.location = selectedLink.attr('href');
            return;
        }
    } else if (event.which == 38 || event.which == 40) {
        $('#search-resultbox').show();

        var selected = $('#search-resultbox a.selected');
        if (selected.length == 0) {
            $('#search-results').find('a').first().addClass('selected');
        } else {
            var next;
            if (event.which == 40) {
                next = selected.parent().next().find('a').first();
            } else {
                next = selected.parent().prev().find('a').first();
            }
            if (next.length != 0) {
                var resultbox = $('#search-results');
                var position = next.position();

//              TODO scrolling is buggy and jumps around
//                resultbox.scrollTop(Math.floor(position.top));
//                console.log(position.top);

                selected.removeClass('selected');
                next.addClass('selected');
            }
        }

        return;
    }
    $('#search-resultbox').show();
    $('#search-results').html('<li><span class="no-results">No results</span></li>');

    var result = jssearch.search(query);

    if (result.length > 0) {
        var i = 0;
        var resHtml = '';

        for (var key in result) {
            if (i++ > 20) {
                break;
            }
            resHtml = resHtml +
            '<li><a href="' + result[key].file.u.substr(3) +'"><span class="title">' + result[key].file.t + '</span>' +
            '<span class="description">' + result[key].file.d + '</span></a></li>';
        }
        $('#search-results').html(resHtml);
    }
});

// hide the search results on ESC
$(document).on("keyup", function(event) { if (event.which == 27) { $('#search-resultbox').hide(); } });
// hide search results on click to document
$(document).bind('click', function (e) { $('#search-resultbox').hide(); });
// except the following:
searchBox.bind('click', function(e) { e.stopPropagation(); });
$('#search-resultbox').bind('click', function(e) { e.stopPropagation(); });

});</script></body>
</html>
